<meta charset='utf8'> <!-- 文字コード -->
<meta name='viewport' content='width=device-width'> <!-- スマホ対応 -->

<!--Bootstrap４に必要なCSSとJavaScriptを読み込み-->
<link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css' integrity='sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO' crossorigin='anonymous'>
<script src='https://code.jquery.com/jquery-3.3.1.slim.min.js' integrity='sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo' crossorigin='anonymous'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js' integrity='sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49' crossorigin='anonymous'></script>
<script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js' integrity='sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy' crossorigin='anonymous'></script>

<link rel='stylesheet' href='style.css'> <!-- CSS -->
<link href='https://use.fontawesome.com/releases/v5.6.1/css/all.css' rel='stylesheet'> <!-- Font Awesome -->
<!-- <script src='https://code.jquery.com/jquery-3.3.1.js'></script> jQuery -->

<body>
<nav class='navbar text-black-50 bg-light'>
	<div class='container'>

		<h3>焼き捨てメモ</h3>
	</div>
</nav>


<div class='container my-3'>

  <!-- 最初の説明文 -->
  <div id='only_once' class='text-sm-center mb-4 balloon rounded rounded-lg p-3 mx-auto col-lg-7'>
    <p class='text-sm-center'>
      抱え込んでいる心のモヤモヤを、整理してみませんか？ 
      <br class='d-none d-md-block'>
      誰にも話せない悩み、嫌いなあの人のこと...
    </p>
    <p class='mb-0 text-sm-center'>
      言葉にしてみることで、解決に繋がる場合もあります。
      <br class='d-none d-md-block'>
      データは残らないので、安心して何でも書いてみてください。
    </p>
  </div>

  <div id='bigarea'>
  	<!-- 大枠 この中に追加していく -->
  </div> 

  <div class="text-center btn-div mt-4"> <!-- ボタンを真ん中にする -->
	  <div class='btn btn-dark' onclick='add()'>新しいメモ　＋</div> <!-- 新規追加ボタン -->
	</div>
</div>

</body>

<script src='fire.js'></script> <!-- 燃えるアクション -->
<script>

// 追加
function add() { 

  var section = document.createElement('section') // セクション
  section.classList.add('mb-3'); // マージン

  var textbox = document.createElement('div') // 入力欄の為のdiv
  textbox.setAttribute('contenteditable','true') // 入力できる欄にする
  textbox.classList.add('textbox', 'bg-white', 'w-100', 'px-2', 'py-2', 'rounded', 'rounded-sm'); // クラス

  var trash = document.createElement('i') // 削除ボタン
  trash.classList.add('fas', 'fa-burn', 'trash', 'btn', 'btn-lg'); // 炎アイコンの為のクラス
  trash.onclick = function(e) { // 削除ボタンを押したとき （eは自分自身のelement？）
    removeElement(e) // 削除関数を実行
  }



  var bigarea = document.getElementById('bigarea') // 大枠
  bigarea.appendChild(section) // セクション生成
  section.appendChild(textbox) // 入力欄生成
  section.appendChild(trash) // ゴミ箱生成
}



// 削除
function removeElement(e) { 

  var confirm = window.confirm('このメモを燃やしますか？') // 確認アラート

  if(confirm){ // 「OK」の場合
    var trash = e.target // クリックされたゴミ箱
    var textbox = trash.previousSibling // 前の要素(つまりテキストボックス)
    var section = textbox.parentElement // セクション

    var canvas = document.createElement('canvas') // キャンバス
    canvas.classList.add('rounded', 'rounded-sm', 'bg-dark'); // クラス
    canvasInit(canvas) // 燃えるアクションの設定（別ファイルの関数）
    section.appendChild(canvas) // 炎のキャンバス生成

    setTimeout(function(){ // 1.5秒後に
    	section.classList.add('feedout') // フェードアウトさせる
    },1500)

    setTimeout(function(){ // 2.2秒後に
      var container = section.parentElement // その親のcontainer
      container.removeChild(section) // conteinterからsectionを削除
      // section.classList.add('smooth-up')// スムーズに高さを無くす
    },2200)
    // setTimeout(function(){ // 2.9秒後に
    //   section.removeChild(trash) 
    //   section.removeChild(textbox) 
    //   section.removeChild(canvas) 
    // },2900)
  }
}

// ページ読み込み時
window.onload = function() {
	add() // 早速メモを１つ作成
}

</script>

<script src='various.js'></script> <!-- 朝と夜で背景が変わる -->