<meta charset='utf8'> <!-- 文字コード -->
<meta name='viewport' content='width=device-width'> <!-- スマホ対応 -->

<!--Bootstrap４に必要なCSSとJavaScriptを読み込み-->
<link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css' integrity='sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO' crossorigin='anonymous'>
<script src='https://code.jquery.com/jquery-3.3.1.slim.min.js' integrity='sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo' crossorigin='anonymous'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js' integrity='sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49' crossorigin='anonymous'></script>
<script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js' integrity='sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy' crossorigin='anonymous'></script>

<link rel='stylesheet' href='style.css'> <!-- CSS -->
<link href='https://use.fontawesome.com/releases/v5.6.1/css/all.css' rel='stylesheet'> <!-- Font Awesome -->
<!-- <script src='https://code.jquery.com/jquery-3.3.1.js'></script> --> <!-- jQuery -->


<body>
<nav class='navbar text-black-50 bg-light'>
	<div class='container'>
		<h3>焼き捨てメモ</h3>
	</div>
</nav>

<div class='container my-3'>
  <div id='bigarea'>
  	<!-- 大枠 この中に追加していく -->
  </div> 

  <div class="text-center btn-div mt-4"> <!-- ボタンを真ん中にする -->
	  <div class='btn btn-dark' onclick='add()'>新しいメモ　＋</div> <!-- 新規追加ボタン -->
	</div>
</div>

</body>

<script src='fire.js'></script> <!-- 燃えるアクション -->
<script>

// 追加
function add() { 

  var section = document.createElement('section') // セクション
  section.classList.add('mb-3'); // マージン

  var textbox = document.createElement('textarea') // テキストエリア
  textbox.classList.add('w-100', 'px-2', 'py-2', 'border-0', 'rounded', 'rounded-sm'); // クラス

  var trash = document.createElement('i') // 削除ボタン
  trash.classList.add('fas', 'fa-burn', 'trash', 'btn', 'btn-lg'); // 炎アイコンの為のクラス
  trash.onclick = function(e) { // 削除ボタンを押したとき （eは自分自身のelement？）
    removeElement(e) // 削除関数を実行
  }



  var bigarea = document.getElementById('bigarea') // 大枠
  bigarea.appendChild(section) // セクション生成
  section.appendChild(textbox) // テキストエリア生成
  section.appendChild(trash) // ゴミ箱生成
}



// 削除
function removeElement(e) { 

  var trash = e.target // クリックされたゴミ箱
  var textbox = trash.previousSibling // 前の要素(つまりテキストボックス)
  var section = textbox.parentElement // セクション

  var canvas = document.createElement('canvas') // キャンバス
  canvas.classList.add('rounded', 'rounded-sm', 'bg-dark'); // クラス
  canvasInit(canvas) // 燃えるアクションの設定（別ファイルの関数）
  section.appendChild(canvas) // キャンバス生成

  setTimeout(function(){ // 1.5秒後に
  	section.classList.add('feedout') // フェードアウトさせる
  },1500)

  setTimeout(function(){ // 2.5秒後に
	  var bigarea = section.parentElement // 大枠
	  bigarea.removeChild(section) // セクション消す
  },2500)
}

window.onload = function() {
	console.log('読み込んだとき、早速メモを１つ作成')
	add()
}

</script>

<script src='scenery.js'></script> <!-- 朝と夜で背景が変わる -->